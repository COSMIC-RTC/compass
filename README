
source:
https://projets-lesia.obspm.fr/projects/compass/wiki/Install_the_platform

# Environment configuration
Into your .bashrc

export CUDA_ROOT=/usr/local/cuda
export GENCODE=arch=compute_30,code=sm_30
export CUDA_INC_PATH=$CUDA_ROOT/include
export CUDA_LIB_PATH=$CUDA_ROOT/lib
export CUDA_LIB_PATH_64=$CUDA_ROOT/lib64
export PATH=$CUDA_ROOT/bin:$PATH
export LD_LIBRARY_PATH=$CUDA_LIB_PATH_64:$CUDA_LIB_PATH:$LD_LIBRARY_PATH

export OPENBLAS_ROOT=/usr/local/openblas
export LD_LIBRARY_PATH=$OPENBLAS_ROOT/lib:$LD_LIBRARY_PATH

export MAGMA_ROOT=/usr/local/magma
export LD_LIBRARY_PATH=$MAGMA_ROOT/lib:$LD_LIBRARY_PATH
export PKG_CONFIG_PATH=$MAGMA_ROOT/lib/pkgconfig

export COMPASS_ROOT=/home/user/compass
export NAGA_ROOT=$COMPASS_ROOT/naga
export SHESHA_ROOT=$COMPASS_ROOT/shesha
export LD_LIBRARY_PATH=$COMPASS_ROOT/libcarma:$COMPASS_ROOT/libsutra:$LD_LIBRARY_PATH

# OpenBLAS installation
dependencies : gfortran g++

Download TAR file : http://github.com/xianyi/OpenBLAS/tarball/v0.2.13
or the GIT repo : git clone https://github.com/xianyi/OpenBLAS.git

1)Normal compile

Please read GotoBLAS_02QuickInstall.txt or type "make"

2)Installation 

sudo make install PREFIX=$OPENBLAS_ROOT

# MAGMA installation
dependencies : gfortran g++

Download TAR file : http://icl.cs.utk.edu/magma/software/index.html

inside the MAGMA directory:
$ cp make.inc.openblas make.inc

edit the make.inc : 
 - specify the GPU_TARGET
 - define OPENBLASDIR and CUDADIR

compile : make -j8 shared sparse
install : sudo make install prefix=$MAGMA_ROOT

# COMPASS installation

1) download the last version of COMPASS : 
svn co https://version-lesia.obspm.fr/repos/compass/trunk compass

2) go into the compass directory 

3) compile it : make clean install

# test COMPASS

Run this command:
$ cd $SHESHA_ROOT/widgets && ipython -i widget_ao.py
